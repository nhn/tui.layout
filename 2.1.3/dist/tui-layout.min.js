/*!
 * tui-layout.min.js
 * @version 2.1.2
 * @author NHNEnt FE Development Lab <dl_javascript@nhnent.com>
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery"),require("tui-code-snippet")):"function"==typeof define&&define.amd?define(["jquery","tui-code-snippet"],e):"object"==typeof exports?exports.Layout=e(require("jquery"),require("tui-code-snippet")):(t.tui=t.tui||{},t.tui.Layout=e(t.$,t.tui&&t.tui.util))}(this,function(t,e){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="dist",e(0)}([function(t,e,i){"use strict";var n=i(2),s=i(3),o=i(1),h=i(4),l=i(5),u=s.defineClass({init:function(t,e){e=s.extend({usageStatistics:!0},e),this.$element=null,this._initContainer(t),this._makeGroup(e.grouplist),this._makeGuide(e.guideHTML),this._setEvents(),e.usageStatistics&&s.sendHostname("layout","UA-129987462-1")},_initContainer:function(t){s.isString(t)?this.$element=n("#"+t):this.$element=n(t)},_makeGroup:function(t){var e;this.groups={},s.forEach(t,function(t){e=this.groups[t.id]=new h(t),this.$element.append(e.$element)},this)},_getGroup:function(t){return s.isObject(t)&&(t=t.attr("data-group")?t.attr("data-group"):t.parent().attr("data-group")),this.groups[t]},_makeGuide:function(t){this._guide=new l({guideHTML:t})},_setEvents:function(){this.onMouseDown=n.proxy(this._onMouseDown,this),this.onMouseMove=n.proxy(this._onMouseMove,this),this.onMouseUp=n.proxy(this._onMouseUp,this),n(".drag-item-move").on("mousedown",this.onMouseDown)},_onMouseDown:function(t){var e=n(document);this.height(e.height()),this._setGuide(t.target,t.clientX,t.clientY),e.on("mousemove",this.onMouseMove),e.on("mouseup",this.onMouseUp)},_setGuide:function(t,e,i){var s=n(document),o={x:e+s.scrollLeft()+10,y:i+s.scrollTop()+10},h=n(t).attr("data-item"),l=n("#"+h);this._guide.ready(o,l),this._guide.setMoveElement(l),this.$temp=l,this._lockTemp()},_lockTemp:function(){var t=this._getGroup(this.$temp),e=t.list[this.$temp.attr("data-index")];this.$temp.css("opacity","0.2"),this.$temp.find("#"+e.contentId).css("visibility","hidden")},_unlockTemp:function(){var t=this._getGroup(this.$temp),e=t.list[this.$temp.attr("data-index")];this.$temp.css("opacity","1"),this.$temp.find("#"+e.contentId).css("visibility","visible")},_onMouseMove:function(t){var e,i,s,o,h;e=n(t.target).parent(),i=n(document),s=t.clientX+i.scrollLeft(),o=t.clientY+i.scrollTop(),h=e.attr("data-group"),this._setScrollState(s,o),this._moveGuide(s,o),h&&this._detectMove(e,s,o)},_setScrollState:function(t,e){var i=n(document),s=n(window),o=this.height(),h=s.height(),l=i.scrollTop(),u=o-h;h+l<e&&i.scrollTop(Math.min(l+(e-h+l),u))},height:function(t){var e=!1;return s.isUndefined(t)?e=this._height:this._height=t,e},_detectMove:function(t,e,i){var o,h=n(document),l=this._getGroup(t),u=h.scrollTop(),r=h.scrollLeft();s.isEmpty(l.list)?(t.append(this.$temp),this.height(h.height()),this.$temp.way="after",this.$temp.index=0):(o=this._detectTargetByPosition({x:e+r,y:i+u},l),o&&o.way&&(o[o.way](this.$temp),this.height(h.height()),this.$temp.way=o.way,this.$temp.index=o.attr("data-index")))},_moveGuide:function(t,e){this._guide.moveTo({x:t+10+"px",y:e+10+"px"})},_detectTargetByPosition:function(t,e){var i;return s.forEach(e.list,function(n){this._isValidItem(n)&&(i=this._getTarget(n,t,e)||i)},this),i},_getTarget:function(t,e,i){var s,o=t.$element.offset(),h=this._getBottom(t,i),l=t.$element.height(),u=n(document).scrollTop()+o.top;return e.y>u&&e.y<=u+l/2?(s=t.$element,s.way="before"):e.y>u+l/2&&e.y<h&&(s=t.$element,s.way="after"),s},_isValidItem:function(t){return t.$element[0]!==this.$temp[0]},_getBottom:function(t,e){var i,s=t.$element.next(),h=n(document),l=e.$element.offset(),u=h.scrollTop()+l.top+e.$element.height();return i=s.hasClass(o.DIMMED_LAYER_CLASS)?u:h.scrollTop()+s.offset().top},_getAddIndex:function(){var t=this.$temp,e=parseInt(t.index,10);return"after"===t.way&&(e+=1),e},_onMouseUp:function(){var t=this._guide,e=n(document);this._update(),this._unlockTemp(),t.finish(),e.off("mousemove",this.onMouseMove),e.off("mouseup",this.onMouseUp)},_update:function(){var t=this.$temp,e=this._getGroup(t.attr("data-groupinfo")),i=this._getGroup(t.parent()),n=parseInt(t.attr("data-index"),10),s=this._getAddIndex(),o=e.list[n];isNaN(s)||(e.storePool(),i.storePool(),e.remove(n),i.add(o,s),i.render(),e.render())}});t.exports=u},function(t,e){"use strict";t.exports={HTML:{MOVEBUTTON:'<button class="move-button drag-item-move" data-item="{{item-id}}">move</button>',ELEMENT:'<div class="item" data-index="{{number}}"><div class="{{wrapper}}"></div></div>',TITLE:'<div class="title"></div>',TOGGLEBUTTON:'<button class="toggle-button">toggle</button>',GROUP:'<div class="group gp_{{group-id}}" data-group="{{group-id}}"></div>',GUIDE:'<div class="item-guide"></div>'},TEXT:{DEFAULT_TITLE:"no title"},ERROR:{OPTIONS_NOT_DEFINED:"options are not defined"},DEFAULT_WRPPER_CLASS:"item-body",DIMMED_LAYER_CLASS:"dimmed-layer"}},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){"use strict";var n=i(2),s=i(3),o=i(1),h=i(6),l=s.defineClass({$pool:n('<div class="pool" style="display:none"></div>'),init:function(t){if(!t)throw new Error(o.ERROR.OPTIONS_NOT_DEFINED);this.size=t.ratio+"%",this.id=t.id,this._makeElement(t.html||o.HTML.GROUP),this._makeItems(t.items),this._appendDimmed(),this.render()},_makeElement:function(t){t=this._getHtml(t,{"group-id":this.id}),this.$element=n(t),this.$element.css({position:"relative",width:this.size})},_getHtml:function(t,e){return t=t.replace(/\{\{([^\}]+)\}\}/g,function(t,i){return e[i]})},_makeItems:function(t){var e={groupInfo:this.id};this.list=s.map(t,function(t){return s.extend(t,e),new h(t)},this)},_makeDimmed:function(){this.$dimmed=n('<div class="'+o.DIMMED_LAYER_CLASS+'"></div>'),this.$dimmed.css({position:"absolute",left:0,top:0,bottom:0,right:0,display:"none"})},_appendDimmed:function(){this.$dimmed||this._makeDimmed(),this.$element.append(this.$dimmed)},remove:function(t){this.storePool(this.list[t]),this.list.splice(t,1)},add:function(t,e){arguments.length>1?this.list.splice(e,0,t):this.list.push(t),t.groupInfo=this.id},render:function(){s.forEach(this.list,function(t,e){this.$dimmed.before(t.$element),t.index=e,t.$element.attr({"data-index":e,"data-groupinfo":this.id})},this),this.$dimmed.hide()},storePool:function(t){t?this.$pool.append(t):s.forEach(this.list,function(t){this.$pool.append(t.$element)},this)}});t.exports=l},function(t,e,i){"use strict";var n=i(2),s=i(3),o=i(1),h=s.defineClass({init:function(t){t=t||{},this.$element=n(t.guideHTML||o.HTML.GUIDE),this.$element.css("position","absolute"),this.$element.appendTo(document.body),this.$dimElements=n("."+o.DIMMED_LAYER_CLASS),this.hide()},ready:function(t,e){this.setPos(t),this.$dimElements.show(),e&&this.setContent(e),this.$element.show()},finish:function(){this.$dimElements.hide(),this.$element.hide()},moveTo:function(t){this.setPos(t)},setPos:function(t){this.$element.css({left:t.x,top:t.y})},setContent:function(t){this.$element.empty(),this.$element.append(t.clone()),this.$element.css({width:t.width()+"px",height:t.height()+"px"})},show:function(){this.isDisable||this.$element.show()},hide:function(){this.$element.hide()},disable:function(){this.isDisable=!0},enable:function(){this.isDisable=!1},setMoveElement:function(t){this.$moveElement=t},getScrollLeft:function(){return window.scrollX||n(window).scrollLeft()},getScrollTop:function(){return window.scrollY||n(window).scrollTop()}});t.exports=h},function(t,e,i){"use strict";var n=i(2),s=i(3),o=i(1),h=s.defineClass({init:function(t){if(!t)throw new Error(o.ERROR.OPTIONS_NOT_DEFINED);s.extend(t,{elementHTML:t.elementHTML||o.HTML.ELEMENT,moveButtonHTML:t.moveButtonHTML||o.HTML.MOVEBUTTON,titleHTML:t.titleHTML||o.HTML.TITLE,toggleButtonHTML:t.toggleButtonHTML||o.HTML.TOGGLEBUTTON,title:t.title||o.TEXT.DEFAULT_TITLE}),s.extend(this,t),this._makeElement(),s.isBoolean(this.isClose)||this.fixTitle(),this.isClose?this.close():this.open(),this.$content.append(n("#"+this.contentId)),this.$element.attr("id","item_id_"+this.contentId),this._setEvents()},getIndex:function(){return this.index},_makeElement:function(){var t=this.wrapperClass||o.DEFAULT_WRPPER_CLASS,e=this._getHtml(this.elementHTML,{number:this.index,wrapper:t});this.$element=n(e),this.$element.css("position","relative"),this.$content=this.$element.find("."+t),this.isDraggable=!!this.isDraggable,this._makeTitle()},_makeTitle:function(){this.$titleElement=n(this.titleHTML),this.$titleElement.html(this.title),this.isDraggable&&this._makeDragButton(this.moveButtonHTML),this.$content.before(this.$titleElement),this._makeToggleButton(this.toggleButtonHTML)},_getHtml:function(t,e){return t=t.replace(/\{\{([^\}]+)\}\}/g,function(t,i){return e[i]})},_makeDragButton:function(t){t=this._getHtml(t,{"item-id":"item_id_"+this.contentId}),this.$titleElement.append(n(t))},_makeToggleButton:function(t){this.$toggleButton=n(t),this.$titleElement.append(this.$toggleButton)},close:function(){this.$toggleButton.addClass("open"),this.$content.hide()},open:function(){this.$toggleButton.removeClass("open"),this.$content.show()},fixTitle:function(){this.showTitle(),this.isTitleFix=!0},showTitle:function(){this.$titleElement.show()},hideTitle:function(){this.isTitleFix||this.$titleElement.hide()},toggle:function(){this.$toggleButton.hasClass("open")?this.open():this.close()},_setEvents:function(){this.$toggleButton.on("click",n.proxy(this.toggle,this))}});t.exports=h}])});